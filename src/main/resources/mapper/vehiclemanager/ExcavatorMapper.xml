<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zs.gms.mapper.vehiclemanager.ExcavatorMapper">

    <select id="findExcavatorListPage" parameterType="com.zs.gms.entity.vehiclemanager.Excavator"
            resultType="com.zs.gms.entity.vehiclemanager.Excavator">
        select te.EXCAVATORID,
        te.BRANCHLENGTH,
        te.CAPACITY,
        te.CREATETIME,
        te.EXCAVATORNO,
        te.IP1,
        te.IP2,
        te.X1,
        te.X2,
        te.Y1,
        te.Y2,
        tbe.USERID,
        tbe.LOADAREAID LOADID,
        tbe.MAPID,
        su.USERNAME
        from t_excavator te
        left join t_bind_excavator tbe on tbe.EXCAVATORID = te.EXCAVATORID
        left join sys_user su on su.USERID=tbe.USERID
        where 1=1 and te.ISDEL=false
        <if test="excavator.userId!=null">
            and tbe.USERID=#{excavator.userId}
        </if>
        <if test="excavator.loadId!=null">
            and tbe.LOADAREAID=#{excavator.loadId}
        </if>
    </select>
</mapper>